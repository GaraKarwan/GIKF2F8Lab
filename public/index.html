<!DOCTYPE html>
<html lang="en">

<head>

    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Animaze</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" />
    <link rel="stylesheet" href="main.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin="anonymous" />
    <link href="https://fonts.googleapis.com/css2?family=Oxygen&display=swap" rel="stylesheet">
</head>

<body>

    <!--CONTAINER-->
    <div class="container-flow" id="app">

        <!--NAVBAR-->
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <a class="navbar-brand" href=""><i class="fab fa-autoprefixer"></i></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="index.html">Home <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="admin.html">Admin</a>
                    </li>
                    <li class="nav-item float-right" data-toggle="modal" data-target="#cartModal">
                        <a class="nav-link"><i class="fa fa-shopping-cart"></i></a>
                    </li>
                </ul>
                <form class="form-inline my-2 my-lg-0">
                    <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-secondary my-2 my-sm-0" type="submit"><i class="fas fa-search"></i></button>
                </form>
            </div>
        </nav>
        <!--NAVBAR END-->

        <!--CAROUSEL-->
        <div id="carouselExampleCaptions" class="carousel slide" data-ride="carousel">
            <ol class="carousel-indicators">
                <li data-target="#carouselExampleCaptions" data-slide-to="0" class="active"></li>
                <li data-target="#carouselExampleCaptions" data-slide-to="1"></li>
                <li data-target="#carouselExampleCaptions" data-slide-to="2"></li>
            </ol>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="images/animeslider1.jpg" class="d-block w-100" alt="...">
                    <div class="carousel-caption d-none d-md-block">
                    </div>
                </div>
                <div class="carousel-item">
                    <img src="images/animeslider2.jpg" class="d-block w-100" alt="...">
                    <div class="carousel-caption d-none d-md-block">
                    </div>
                </div>
                <div class="carousel-item">
                    <img src="images/animeslider3.jpg" class="d-block w-100" alt="...">
                    <div class="carousel-caption d-none d-md-block">
                    </div>
                </div>
            </div>
            <a class="carousel-control-prev" href="#carouselExampleCaptions" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleCaptions" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
        <!--CAROUSEL END-->

        <div class="products-header">
            <h1>Products</h1>
        </div>

        <!--Product Cards-->
        <div class="row justify-content-center justify-content-between">
            <div class="card" style="width: 18rem;" v-for="product in products" v-bind:key="product.id">
                <img class="card-img" v-bind:src="product.picture" alt="picture of product">
                <div class="card-body">
                    <h5 class="card-title">{{ product.name }}</h5>
                    <p class="card-text">{{ product.description }}</p>
                    <p class="card-text">Price: {{ product.price }} SEK</p>
                    <button type="button" class="btn btn-primary float-right" data-toggle="modal"
                        data-target="#showModal" v-on:click="showProd(product.id)">
                        More Info
                    </button>
                </div>
            </div>
        </div>
        <!--Product Cards END-->
        <!-- Show Modal -->

        <div class="modal fade" id="showModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">
                            {{prodModal.name}}
                        </h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <img class="card-img" v-bind:src="prodModal.picture" alt="Picture of product"
                            style="width: 15rem; height: 20rem;">
                        
                        <p>Description: {{prodModal.description}} </p>
                        <p>Price: {{prodModal.price}} SEK</p>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-dark float-left" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-success float-right" v-on:click="addToCart(prodModal)" data-dismiss="modal">Add to
                            cart</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Shopping Cart Modal -->
        <div class="modal fade" id="cartModal">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title modal-brand">Your Shopping Cart!</h5>
                    </div>
                    <div class="modal-body">
                        <div class="row ml-2 mr-2 mt-3 mb-3 justify-content-between align-items-center"
                            v-for="product in cartProds">
                            <h5 class="modal-cart-title text"> {{ product.name }}</h5>
                            <span class="modal-cart-span">{{ product.price }} SEK</span>
                            <i class="fa fa-trash" v-on:click="removeFromCart(product)"></i>
                        </div>
                        <div v-show="cartProds.length === 0">
                            <p class="modal-cart-title text-center">Your shopping cart is empty, you are welcome to
                                continue
                                browsing our products.</p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-dark" data-dismiss="modal">Close</button>
                        <div class="w-100 modal-cart-price text-right">Total: <span>{{ totalPrice }} SEK</span></div>
                        <button type="button" class="btn btn-success" data-dismiss="modal">Buy</button>
                    </div>
                </div>
            </div>
        </div>
        <!--Shopping Cart Modal END-->

        <div id="footer">
            <div class="footer-item item1">
                <h3>CUSTOMER SUPPORT</h3>
                <ul>
                    <li>Hjälp & Kontakt</li>
                    <li>Beställningar & Leveranser</li>
                    <li>Betalning & Prissättning</li>
                    <li>Returer & Återköp</li>
                    <li>Vanliga Frågor</li>
                    <li>Cookie-policy</li>
                    <li>Villkor</li>
                    <li><img src="/images/kvinna.jpg" alt="glad kvinna kundtjänst"></li>
                </ul>
    
            </div>
            <div class="footer-item item2">
                <h3>DESTINATIONS</h3>
                <ul>
                    <li>Sweden</li>
                    <li>Denmark</li>
                    <li>Norway</li>
                    <li>India</li>
                    <li>Ghana</li>
                    <li>Kurdistan</li>
                    <li><img src="/images/postnord.png" alt="postnord logga"></li>
                </ul>
    
            </div>
            <div class="footer-item item3">
                <h3>ABOUT ANIMAZE</h3>
                <ul>
                    <a class="footerlinks" href="#">
                        <li>About Page</li>
                    </a>
    
                    <a class="footerlinks" href="#">
                        <li>HTML Validation</li>
                    </a>
                    <a class="footerlinks" href="#">
                        <li>CSS Validation</li>
                    </a>

                    <a class="footerlinks" href="#">
                        <li><i class="fab fa-twitter"></i> Twitter</li>
                    </a>
                    <a class="footerlinks" href="#">
                        <li><i class="fab fa-instagram"></i> Instagram</li>
                    </a>
                    <a class="footerlinks" href="#">
                        <li><i class="fab fa-facebook-square"></i> Facebook</li>
                    </a>
                    <div class="icon-container">
                        <i class="fab fa-cc-visa fa-2x"  style="color:navy;"></i>
                        <i class="fab fa-cc-amex fa-2x" style="color:blue;"></i>
                        <i class="fab fa-cc-mastercard fa-2x" style="color:red;"></i>
                        <i class="fab fa-cc-discover fa-2x" style="color:orange;"></i>
                      </div>
                    <a href="https://dhandel.se/trygg-e-handel/certifierade-e-handlare/"><li><img src="/images/trygghandel.png" alt="trygg e-handel logga"></li></a>
                </ul>
    
            </div>
        </div>
        
    </div>
    <!--CONTAINER END-->

    <script src="http://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

    <!--VUE START-->
    <script>
        // VUE SCRIPT
        const vm = new Vue({
            el: '#app',
            data: {
                products: [],
                prodModal: [],
                cartProds: []

            },
            methods: {

                showCart() { //method that shows the cart items
                    $("#cartModal").modal("show");
                },


                addToCart(prodModal) { //method to allow adding to cart
                    this.cartProds.push(prodModal);
                },
                removeFromCart(prodModal) { //method to delete items from cart
                    this.cartProds.splice(this.cartProds.indexOf(prodModal), 1);
                },
                // method that shows our products as cards on the index page
                showProd(id) {
                    var self = this;
                    $.getJSON("/api/products/" + id, function (jsondata) {
                        console.log(JSON.stringify(jsondata));
                        self.prodModal = jsondata;
                    });

                    $('#showModal').modal('show');

                },

            },
            computed: { // Show the total price of the items currently in the Shopping cart.
                totalPrice() {
                    var totalPrice= 0;
                    for (var i = 0; i < this.cartProds.length; i++) {
                        totalPrice += this.cartProds[i].price;
                    }
                    return totalPrice;
                },
            },
            mounted() { // method that returns products
                var self = this;
                $.getJSON("/api/products/", function (jsondata) {
                    console.log(JSON.stringify(jsondata))
                    self.products = jsondata;
                });
            }
        });
    </script> <!-- VUE END -->

</body>

</html>